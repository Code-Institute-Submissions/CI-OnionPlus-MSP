{% extends 'base.html' %}

{% block content %}

{% if type == 'FEATURE' %}
<h2 class="center-align">Features</h2>
{% else %}
<h2 class="center-align">Bugs</h2>
{% endif %}

<!-- Show all tickets in a collapsible -->
<ul class="collapsible popout">
    {% for ticket in tickets %}
    <li>
        <div class="collapsible-header"><i class="material-icons">filter_drama</i>{{ ticket.subject }}
            <span class="new badge purple" data-badge-caption="votes">{{ ticket.number_votes }}</span>
            <!-- If user has already voted this ticket, we don't show thumbs up button -->
            {% if ticket.pk not in voted %}
            <span>
                <a href="{% url 'thumb_up' ticket.id %}">
                    <i class="small material-icons purple-text">thumb_up</i>
                </a>
            </span>
            {% endif %}
            <span class="new badge purple" data-badge-caption="">{{ ticket.status }}</span>
        </div>
        <div class="collapsible-body">
            <span>Requested: {{ ticket.description }}</span><br>
            <hr>
            {% if type == 'FEATURE' %}
            <span>Requested: {{ ticket.creation_ts }}</span><br>
            {% else %}
            <span>Reported: {{ ticket.creation_ts }}</span><br>
            {% endif %}
            <span>{{ ticket.ticket_type }}</span><br>
            <span>{{ ticket.pk }}</span><br>
            <a href="{% url 'add_comment' ticket.id user.id %}"
                class="waves-effect waves-light btn-small purple">Comment</a>
            <a href="{% url 'show_comments' ticket.id %}" class="waves-effect waves-light btn-small purple">Show</a>
        </div>
    </li>
    {% endfor %}
</ul>

<!-- ACTION BUTTON TO ADD NEW RECORD -->
<div class="fixed-action-btn">
    <a href="{% url 'create_ticket' %}" class="btn-floating btn-large purple tooltipped" data-position="left"
        data-tooltip="Add new">
        <i class="large material-icons">add_circle</i>
    </a>
</div>

{% endblock %}